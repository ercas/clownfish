<!DOCTYPE html>
<html>
    <head>
        <meta charset=utf-8>
        <title>Clownfish - Upload a File</title>
        <link rel=stylesheet href=style.css>
    </head>
    <body>
        <h1>Clownfish</h1>
        <span class=description>a universal file conversion service</span>
        <br><div id=test-button class="label label-blue">test</div>
        <script>
// create an overlay selector for the given elementId, default option, and
// an array of possible options
function createSelector(elementId,defaultOpt,opts) {
    var element = document.getElementById(elementId);
    var baseErrorString = "could not create selector for " + elementId + "; ";

    // assertions
    if (!element)
        throw new Error("no element with id " + elementId + "exists");
    if (!(opts instanceof Array))
        throw new Error(baseErrorString + "opts is not an array");
    if (opts.indexOf(defaultOpt) == -1)
        throw new Error(baseErrorString + defaultOpt + " is not an element of opts");
    else
        element.innerHTML = defaultOpt;

    element.onclick = function() {
        var overlay = document.getElementById("selector-overlay");
        currentOpt = element.innerHTML;

        // function to create a single selection in the selector menu
        function createSelection(opt,colorClass) {
            var button = document.createElement("div");
            button.setAttribute("class","label " + colorClass);
            button.innerHTML = opt;
            button.onclick = function() {
                document.body.removeChild(overlay);
                element.innerHTML = opt;
            }
            overlay.appendChild(button);
        }

        // create a full page overlay
        if (!overlay) {
            overlay = document.createElement("div");
            overlay.setAttribute("id","selector-overlay");
            document.body.appendChild(overlay);

            // iterate through possible options, creating selections for each
            for (var i = 0; i < opts.length; i++) {
                if (opts[i] == currentOpt)
                    createSelection(opts[i],"label-green");
                else
                    createSelection(opts[i],"label-blue");
            }
        }
    }

    console.log("created selector for " + elementId);
}
        </script>
        <script>
createSelector("test-button","hey",["hey","you"]);
        </script>
    </body>
</html>
